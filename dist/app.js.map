{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d3659a322dc909f45c8d","webpack:///./src/app.js","webpack:///./src/whiteboard.js","webpack:///./src/draw.js","webpack:///./src/shape.js","webpack:///./src/utils.js"],"names":["Whiteboard","_penSizeValueElement","document","getElementById","_penColorElement","_points","_shapes","_setupCanvas","_setupContext","_attachListeners","isTouchDevice","_canvasElement","addEventListener","_startDraw","bind","passive","_cancelDraw","_draw","_finishDraw","_isDrawing","length","event","touches","preventDefault","curPoint","_getPointFromEvent","_lastPoint","drawLineToMidPoint","_context","color","value","size","textContent","push","shape","points","slice","clearRect","canvas","width","height","i","drawLine","point","rect","getBoundingClientRect","clientX","left","clientY","top","offsetX","offsetY","setAttribute","window","innerWidth","innerHeight","getContext","lineJoin","lineCap","globalCompositeOperation","lineWidth","strokeStyle","Draw","context","config","p1","p2","fillStyle","beginPath","arc","Math","PI","fill","moveTo","len","midPoint","getMidPoint","quadraticCurveTo","lineTo","stroke","Shape","Utils","navigator","maxTouchPoints"],"mappings":"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","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"app\"] = factory();\n\telse\n\t\troot[\"app\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d3659a322dc909f45c8d\n **/","import Whiteboard from './whiteboard';\n\nnew Whiteboard();\n\n\n/** WEBPACK FOOTER **\n ** ./src/app.js\n **/","import Draw from './draw';\nimport Shape from './shape';\nimport Utils from './utils';\n\nclass Whiteboard {\n  constructor() {\n    this._penSizeValueElement = document.getElementById('penSizeValue');\n    this._penColorElement = document.getElementById('penColor');\n\n    this._points = [];\n    this._shapes = [];\n\n    this._setupCanvas();\n    this._setupContext();\n\n    this._attachListeners();\n  }\n\n  _attachListeners() {\n    if (Utils.isTouchDevice()) {\n      this._canvasElement.addEventListener('touchstart', this._startDraw.bind(this), {passive: true});\n      this._canvasElement.addEventListener('touchcancel', this._cancelDraw.bind(this), {passive: true});\n      this._canvasElement.addEventListener('touchmove', this._draw.bind(this));\n      this._canvasElement.addEventListener('touchend', this._finishDraw.bind(this), {passive: true});\n    } else {\n      this._canvasElement.addEventListener('mousedown', this._startDraw.bind(this));\n      this._canvasElement.addEventListener('mouseup', this._finishDraw.bind(this));\n      this._canvasElement.addEventListener('mousemove', this._draw.bind(this));\n    }\n  }\n\n  _cancelDraw() {\n    if (!this._isDrawing) {\n      return;\n    }\n\n    this._points.length = 0;\n\n    this._finishDraw(event);\n  }\n\n  _draw(event) {\n    if (!this._isDrawing) {\n      return;\n    }\n\n    if (event.touches && event.touches.length > 1) {\n      // Less or equal to two points into the points array from\n      // the start event and two fingers now means that the user\n      // meant to scroll\n      // in this case we won't draw anything\n      if (this._points.length <= 2) {\n        this._points.length = 0;\n      }\n\n      this._finishDraw(event);\n      return;\n    }\n\n    event.preventDefault();\n\n    let curPoint = this._getPointFromEvent(event);\n    this._lastPoint = Draw.drawLineToMidPoint(this._lastPoint, curPoint, this._context, {\n      color: this._penColorElement.value,\n      size: this._penSizeValueElement.textContent\n    });\n    this._points.push(curPoint);\n  }\n\n  _finishDraw() {\n    if (!this._isDrawing) {\n      return;\n    }\n\n    this._isDrawing = false;\n\n    // In case of draw canceling, there won't be any points\n    // Creating a shape is not needed in this case\n    if (this._points.length) {\n      let shape = new Shape({\n        color: this._penColorElement.value,\n        points: this._points.slice(0),\n        size: this._penSizeValueElement.textContent\n      });\n\n      this._shapes.push(shape);\n\n      this._points.length = 0;\n    }\n\n    this._context.clearRect(0, 0, this._context.canvas.width, this._context.canvas.height);\n\n    for (var i = 0; i < this._shapes.length; i++) {\n      Draw.drawLine(this._shapes[i].points, this._context, {\n        color: this._shapes[i].color,\n        size: this._shapes[i].size\n      });\n    }\n  }\n\n  _getPointFromEvent(event) {\n    let point;\n\n    if (event.touches) {\n      let touches = event.touches[0];\n      let rect = this._canvasElement.getBoundingClientRect();\n\n      point = [touches.clientX - rect.left, touches.clientY - rect.top];\n    } else {\n      point = [event.offsetX, event.offsetY];\n    }\n\n    return point;\n  }\n\n  _setupCanvas() {\n    this._canvasElement = document.getElementById('canvas');\n\n    this._canvasElement.setAttribute('width', window.innerWidth);\n    this._canvasElement.setAttribute('height', window.innerHeight);\n  }\n\n  _setupContext() {\n    this._context = this._canvasElement.getContext('2d');\n\n    this._context.lineJoin = this._context.lineCap = 'round';\n    this._context.globalCompositeOperation = 'source-over';\n  }\n\n  _startDraw(event) {\n    this._isDrawing = true;\n\n    this._context.lineWidth = this._penSizeValueElement.textContent;\n    this._context.strokeStyle = this._penColorElement.value;\n\n    this._lastPoint = this._getPointFromEvent(event);\n\n    this._points.push(this._lastPoint);\n  }\n};\n\nexport default Whiteboard;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/whiteboard.js\n **/","export default class Draw {\n  static drawLine(points, context, config) {\n    let p1 = points[0];\n    let p2 = points[1];\n\n    if (p1 && !p2) {\n      context.fillStyle = config.color;\n\n      context.beginPath();\n      context.arc(p1[0], p1[1], context.lineWidth/2, 0, 2 * Math.PI, false);\n      context.fill();\n    } else {\n      context.lineWidth = config.size;\n      context.strokeStyle = config.color;\n\n      context.beginPath();\n      context.moveTo(p1[0], p1[1]);\n\n      for (let i = 1, len = points.length; i < len; i++) {\n        let midPoint = Draw.getMidPoint(p1, p2);\n        context.quadraticCurveTo(p1[0], p1[1], midPoint[0], midPoint[1]);\n        p1 = points[i];\n        p2 = points[i + 1];\n      }\n\n      context.lineTo(p1[0], p1[1]);\n\n      context.stroke();\n    }\n  }\n\n  static drawLineToMidPoint(p1, p2, context, config) {\n    context.lineWidth = config.size;\n    context.strokeStyle = config.color;\n\n    context.beginPath();\n    context.moveTo(p1[0], p1[1]);\n\n    let midPoint = Draw.getMidPoint(p1, p2);\n    context.quadraticCurveTo(p1[0], p1[1], midPoint[0], midPoint[1]);\n\n    context.stroke();\n\n    return midPoint;\n  }\n\n  static getMidPoint(p1, p2) {\n    return [\n      p1[0] + (p2[0] - p1[0]) / 2,\n      p1[1] + (p2[1] - p1[1]) / 2\n    ];\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/draw.js\n **/","export default class Shape {\n  constructor(config) {\n    this.points = config.points;\n    this.color = config.color;\n    this.size = config.size;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape.js\n **/","export default class Utils {\n  static isTouchDevice() {\n    return 'ontouchstart' in window || navigator.maxTouchPoints;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/"],"sourceRoot":""}